<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Brewmiester Production</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet"/>
    <script src="../Scripts/ajaxCalls.js"></script>



    <script>

        $(document).ready(function () {

            $('#add_new_cook').on('click', toggle_add_visibilty, GetBeerTypes);

            //ajaxCall("GET", "../api/*****", "", GetCookSucess, GetCookError);
            
            let id = 0; // ID counter for Edit/Delete buttons

            helpArr = [{ // client side checks
                "BeerType":'IPA', 
                "Ingrediants":'Hops A, Malt C, Minerals B, Malt C, Hops A', 
                "date_A":'25/1/2019',
                "batch_id":'0'
                },
                {
                "BeerType":'IPA', 
                "Ingrediants":'Hops A, Malt C, Minerals B, Malt C, Hops A', 
                "date_A":'25/1/2019',
                "batch_id":'1'
                }
                ]
            
            console.log(helpArr);

            try {
                $('#tbl').DataTable({

                    data: helpArr,
                    pageLength: 10,
                    columns: [              // Enters data to DataTable
                        {
                            render: function (data, type, row, meta) {
                                id += 1;
                                let data_for_tbl = "data-btnId='" + id + "'";

                                editBtn = "<button type='button' class = 'editBtn btn btn-success'" + data_for_tbl + "> Edit </button>"; 
                                deleteBtn = "<button type='button' class = 'deleteBtn btn btn-danger'" + data_for_tbl + "> Delete </button>";
                                return editBtn + deleteBtn;
                            }
                        },
                        { data: "BeerType" },  // same as data[i].anything
                        { data: "Ingrediants" },
                        { data: "date_A" },
                        {
                            data: "batch_id",
                            render: function (data, type, row, meta) {
                                // ADD HREF !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
                                return '<a href="#">'+data+'</a>'
                            }
                        }
                        ]
                });
            }

            catch (err) {
                alert(err);
            }

        });

        function GetCookSucess(){
            let id = 0; // ID counter for Edit/Delete buttons

            helpArr = [{ // client side checks
                "BeerType":'IPA', 
                "Ingrediants":'Hops A, Malt C, Minerals B, Malt C, Hops A', 
                "date_A":'25/1/2019',
                "batch_id":'0'
                },{
                "BeerType":'IPA', 
                "Ingrediants":'Hops A, Malt C, Minerals B, Malt C, Hops A', 
                "date_A":'25/1/2019',
                "batch_id":'1'}
                ]

            console.log(helpArr);

            try {
                $('#tbl').DataTable({

                    data: helpArr,
                    pageLength: 5,
                    columns: [              // Enters data to DataTable
                        {
                            render: function (data, type, row, meta) {
                                id += 1;
                                let data_for_tbl = "data-btnId='" + id + "'";

                                editBtn = "<button type='button' class = 'editBtn btn btn-success'" + data_for_tbl + "> Edit </button>"; 
                                deleteBtn = "<button type='button' class = 'deleteBtn btn btn-danger'" + data_for_tbl + "> Delete </button>";
                                return editBtn + deleteBtn;
                            }
                        },
                        { data: "BeerType" },  // same as data[i].anything
                        { data: "Ingrediants" },
                        { data: "date_A" },
                        {
                            data: "batch_id",
                            render: function (data, type, row, meta) {
                                // ADD HREF !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
                                return '<a href="#">'+data+'</a>'
                            }
                        }
                        ]
                });
            }

            catch (err) {
                alert(err);
            }
        }

        function GetCookError(err) {
            console.log(err);
        }



        function toggle_add_visibilty(){
            $('.invisible').removeClass();
        }

        function GetBeerTypes(){
            console.log('in Beer types');
            // implement here ajaxcall that gets all beer types from DB
        }


    </script>



    <style>
        body {
            /* margin: 0; */
            /* padding: 0; */
            background-color: #f7f6f6;
            padding-bottom: 1%;
        }

        #headerRow {
            height: 180px;
        }

        .navbar {
            height: 70px;
        }

        table {
            text-align: center;
        }

        #addprod {
            text-align: center;
            margin-top: 100px;
        }

        /* table.dataTable {
            width: 100%;
            margin: 0 auto;
            clear: both;
            border-collapse: separate;
            border-spacing: 0
        } */

        #addprod {
            margin: auto;
            width: 60%;
            border: solid 2px;
            background-color: aliceblue;
        }

        .container {
            padding-bottom: 4%;
        }
    </style>

</head>

<body>
    <!-- NavBar Template -->
    <div class="header text-center">
        <nav class="navbar navbar-expand-lg navbar-light border-bottom" style="background-color: #f7f6f6;">
            <a class="navbar-brand" href="#">Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Production</a>
                    </li>
                    <li class="nav-item active px-2">
                        <a class="nav-link" href="#">Inventory</a>
                    </li>
                    <li class="nav-item active px-2">
                        <a class="nav-link" href="#">Waste</a>
                    </li>
                    <li class="nav-item active px-2">
                        <a class="nav-link" href="#">Alerts</a>
                    </li>
                    <!-- <li class="nav-item">
                  <a class="nav-link disabled" href="#">Disabled</a>
                </li> -->
                </ul>
            </div>
            <a class="navbar-brand" href="#">
                <img src="../Logo_alexander.jpeg" height="68" alt="alexander logo">
            </a>
        </nav>
    </div>
    <br><br>
    <!-- NavBar Template -->

    <!-- table -->
    <div class="container">
        <table id="tbl" class="display" border="1" style="width:100%">
            <thead style="background-color:cornflowerblue">
                <tr>
                    <th></th> <!--edit/delete buttons-->
                    <th>Beer Type</th>
                    <th>Items in Recipe</th>
                    <th>Date</th>
                    <th>Batch #</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
            
        </table> 

        <button id="add_new_cook" data-toggle='collapse' data-target='#addprodContainer' aria-expanded='false' aria-controls='addprodContainer'>Add</button> 
        <!-- collapse/Expend the addprodcontianer (bootstrap) data-toggle='collapse' data-target='#addprodContainer' aria-expanded='false' aria-controls='addprodContainer' -->
    
    </div>
    <!-- table -->


    <!-- Add Product --> 
    <div class="container collapse" id="addprodContainer">
        <div id="addprod">
            <br />
            <form action="/action_page.php">
                <select name="Beer">
                    <option value="">Beer Type</option>
                    <option value="">Blonde</option>
                    <option value="">Ambree</option>
                    <option value="">Green</option>
                    <option value="">Black</option>
                </select>
                <br /><br />
                <label>Choose date</label>
                <input type="date" name="bday">
                <br><br>
                <label>US Malt 1</label>
                <input type="text" value="200" />
                <br><br>
                <label>EU Malt 2</label>
                <input type="text" value="400" />
                <br><br>
                <label>Hops A</label>
                <input type="text" value="80" />
                <br><br>
                <label>Yeast B</label>
                <input type="text" value="70" />
                <br />
                <br />
                <input type="submit">
                <br />
                <br />
            </form>

        </div>
    </div>
    <!-- Add Product -->


</body>

</html>